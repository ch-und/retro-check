import{r as d,j as e}from"./index-ab282390.js";import{F as l,C as E,a as C,M as L,T,P as M,D as B}from"./index-3e9d9416.js";import{S as f}from"./index-3ea3be87.js";import{L as u,b3 as R,Q as q,M as J}from"./EditOutlined-19744e98.js";import{P as K,I as i,S as z}from"./index-46d2abd3.js";const X=()=>{const[r,o]=d.useState([]),[y,m]=d.useState(""),[b,g]=d.useState(!1),[I,p]=d.useState(!1),[n]=l.useForm(),[k,S]=d.useState(!0),[x,F]=d.useState(""),c=t=>t.key===y,V=t=>{S(t.target.checked)};d.useEffect(()=>{p(!0);const t=localStorage.getItem("depositData");setTimeout(()=>{p(!1)},500),t&&o(JSON.parse(t))},[]),d.useEffect(()=>{localStorage.setItem("depositData",JSON.stringify(r))},[r]);const w=t=>{n.setFieldsValue({...t}),m(t.key)},A=async t=>{try{const a=await n.validateFields(),s=[...r],h=s.findIndex(j=>t.key===j.key);if(h>-1){const j=s[h];s.splice(h,1,{...j,...a}),o(s),m("")}else s.push(a),o(s),m("")}catch(a){console.log("Validate Failed:",a)}n.resetFields()},D=()=>{n.validateFields().then(t=>{const a=[...r,{key:Date.now().toString(),...t}];o(a),g(!1),n.resetFields()}).catch(t=>{console.log("Validation failed:",t)})},v=()=>{m("")},N=t=>{o(r.filter(a=>a.key!==t.key))},O=x?r.filter(t=>t.aAddress.toLowerCase().includes(x.toLowerCase())||t.bAddress.toLowerCase().includes(x.toLowerCase())):r,P=[{title:"#",key:"index",render:(t,a,s)=>s+1,align:"center"},{title:"Địa chỉ cá nhân",dataIndex:"aAddress",key:"aAddress",render:(t,a)=>c(a)?e.jsx(l.Item,{name:"aAddress",style:{margin:0},children:e.jsx(i,{defaultValue:t,onChange:s=>n.setFieldsValue({aAddress:s.target.value})})}):t,align:"center",width:500},{title:"Địa chỉ sàn",dataIndex:"bAddress",key:"bAddress",render:(t,a)=>c(a)?e.jsx(l.Item,{name:"bAddress",style:{margin:0},children:e.jsx(i,{defaultValue:t,onChange:s=>n.setFieldsValue({bAddress:s.target.value})})}):t,align:"center",width:500},{title:"Tên sàn",dataIndex:"exchangeName",key:"exchangeName",render:(t,a)=>c(a)?e.jsx(l.Item,{name:"exchangeName",style:{margin:0},children:e.jsx(i,{defaultValue:t,onChange:s=>n.setFieldsValue({exchangeName:s.target.value})})}):t,align:"center"},{title:"Ghi chú",dataIndex:"notes",key:"notes",render:(t,a)=>c(a)?e.jsx(l.Item,{name:"notes",style:{margin:0},children:e.jsx(i,{defaultValue:t,onChange:s=>n.setFieldsValue({notes:s.target.value})})}):t,align:"center"},{title:"Action",key:"action",render:(t,a)=>c(a)?e.jsxs(f,{children:[e.jsx(u,{type:"primary",onClick:()=>A(a),icon:e.jsx(R,{})}),e.jsx(u,{onClick:v,icon:e.jsx(q,{})})]}):e.jsxs(f,{children:[e.jsx(u,{type:"primary",disabled:y!=="",onClick:()=>w(a),icon:e.jsx(J,{})}),e.jsx(M,{title:"Xác nhận xóa?",onConfirm:()=>N(a),children:e.jsx(u,{icon:e.jsx(B,{})})})]}),align:"center"}];return e.jsxs(e.Fragment,{children:[e.jsxs(f,{style:{marginBottom:10},children:[e.jsx(u,{type:"primary",onClick:()=>g(!0),icon:e.jsx(K,{}),shape:"round"}),e.jsx(E,{onChange:V,checked:k,children:"Break page?"}),e.jsxs(C,{color:"magenta",children:["Hiện đang chia sẻ",r.length,"Bản ghi"]}),e.jsx(C,{color:"magenta",children:"Thật thuận tiện để quản lý địa chỉ cá nhân và địa chỉ nạp tiền trên sàn, để đạt được sự tương ứng một-một, tránh việc check sylbi"})]}),e.jsx(i.Search,{bordered:!0,allowClear:!0,placeholder:"Tìm kiếm địa chỉ",value:x,onChange:t=>F(t.target.value),style:{marginBottom:10}}),e.jsx(L,{title:"Thêm bản ghi",open:b,onOk:D,onCancel:()=>g(!1),children:e.jsxs(l,{form:n,layout:"vertical",children:[e.jsx(l.Item,{label:"Địa chỉ cá nhân",name:"aAddress",rules:[{required:!0,message:"Vui lòng nhập địa chỉ cá nhân của bạn"}],children:e.jsx(i,{})}),e.jsx(l.Item,{label:"Địa chỉ sàn",name:"bAddress",rules:[{required:!0,message:"Vui lòng nhập địa chỉ sàn"}],children:e.jsx(i,{})}),e.jsx(l.Item,{label:"Tên sàn",name:"exchangeName",children:e.jsx(i,{})}),e.jsx(l.Item,{label:"Ghi chú",name:"notes",children:e.jsx(i,{})})]})}),e.jsx(z,{spinning:I,children:e.jsx(T,{bordered:!0,columns:P,dataSource:O,className:"centered-table",pagination:k?{defaultPageSize:10}:!1})})]})};export{X as default};
